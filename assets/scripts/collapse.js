// Generated by CoffeeScript 1.5.0
(function() {
  var $, settings;

  $ = jQuery;

  settings = lowtone_woocommerce_widgets_collapse_layered_nav;

  $(function() {
    var $widgets;
    $widgets = $('.widget.woocommerce.widget_layered_nav');
    return $widgets.each(function() {
      var $hidden, $items, $toggle, $widget, hide_text, show_text, toggle;
      $widget = $(this);
      $items = $widget.find('li');
      $hidden = $items.slice(parseInt(settings.visible_items) + 1);
      if ($hidden.length < 1) {
        return;
      }
      show_text = settings.locales.show_text.replace('{num_items}', $items.length);
      hide_text = settings.locales.hide_text.replace('{num_items}', $hidden.length);
      $toggle = $('<a class="toggle">').insertAfter($items.parent());
      toggle = function() {
        $hidden.toggle();
        if ($hidden.is(':hidden')) {
          return $toggle.html(show_text).addClass('expand').removeClass('collapse');
        } else {
          return $toggle.html(hide_text).addClass('collapse').removeClass('expand');
        }
      };
      toggle();
      return $toggle.click(toggle);
    });
  });

}).call(this);
